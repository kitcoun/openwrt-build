# ================================================
# Phicomm K2P/KE 2P OpenWrt 编译配置文件
# 平台: ramips/mt7621
# 版本: 24.10.3
# ================================================

# -------------------------------
# 目标系统配置
# -------------------------------
CONFIG_TARGET_ramips=y          # 选择 ramips 平台
CONFIG_TARGET_ramips_mt7621=y   # 选择 MT7621 芯片组
CONFIG_TARGET_ramips_mt7621_DEVICE_phicomm_k2p=y  # 指定设备为 K2P

# -------------------------------
# 镜像配置
# -------------------------------
# CONFIG_TARGET_ROOTFS_PARTSIZE=16  # 根分区大小(MB)，K2P 闪存16MB，建议。 默认的根分区大小应该是足够的。我们可以不设置这个值，或者设置为一个合理的值
CONFIG_TARGET_ROOTFS_SQUASHFS=y    # 使用 squashfs 只读根文件系统（增加稳定性）
# CONFIG_TARGET_ROOTFS_EXT4FS=y    # 可选：EXT4 可写根文件系统（开发用）

# -------------------------------
# 内核模块配置
# -------------------------------
# 必要的硬件支持模块
CONFIG_PACKAGE_kmod-mt7615e=y          # MT7615 无线驱动（K2P 使用）
CONFIG_PACKAGE_kmod-mt7615-firmware=y  # MT7615 固件
CONFIG_PACKAGE_kmod-gpio-button-hotplug=y  # GPIO 按钮支持（复位键）
CONFIG_PACKAGE_kmod-leds-gpio=y        # GPIO LED 控制

# 网络相关模块
CONFIG_PACKAGE_kmod-nft-offload=y      # NFTables 硬件加速（MT7621 支持）
CONFIG_PACKAGE_kmod-pppoe=y            # PPPoE 协议支持
CONFIG_PACKAGE_kmod-ppp=y              # PPP 协议支持

# -------------------------------
# 基础软件包（建议保留）
# -------------------------------
CONFIG_PACKAGE_base-files=y            # 基础文件系统
CONFIG_PACKAGE_ca-bundle=y             # CA 证书包（HTTPS 必需）
CONFIG_PACKAGE_dnsmasq=y               # DNS 和 DHCP 服务
CONFIG_PACKAGE_dropbear=y              # SSH 服务
CONFIG_PACKAGE_fstools=y               # 文件系统工具
CONFIG_PACKAGE_libc=y                  # C 库
CONFIG_PACKAGE_libgcc=y                # GCC 运行库
CONFIG_PACKAGE_libustream-mbedtls=y    # TLS 加密库
CONFIG_PACKAGE_logd=y                  # 系统日志服务
CONFIG_PACKAGE_mtd=y                   # MTD 工具（刷机用）
CONFIG_PACKAGE_netifd=y                # 网络接口管理
CONFIG_PACKAGE_firewall4=y             # Firewall4 (nftables)
CONFIG_PACKAGE_nftables=y              # NFTables 防火墙
CONFIG_PACKAGE_opkg=y                  # 包管理器
CONFIG_PACKAGE_ppp=y                   # PPP 拨号
CONFIG_PACKAGE_ppp-mod-pppoe=y         # PPPoE 插件,依赖于PPP拨号
CONFIG_PACKAGE_procd-ujail=y           # 进程管理
# CONFIG_PACKAGE_uboot-envtools=y        # U-Boot 环境工具
CONFIG_PACKAGE_uci=y                   # 配置管理
CONFIG_PACKAGE_uclient-fetch=y         # 网络下载工具
CONFIG_PACKAGE_urandom-seed=y          # 随机数种子
CONFIG_PACKAGE_urngd=y                 # 随机数生成器
CONFIG_PACKAGE_wpad-basic-mbedtls=y    # WPA 认证（基础版）

# -------------------------------
# 可选的软件包（根据需求添加）
# -------------------------------
# 文件系统支持（按需选择）
# CONFIG_PACKAGE_kmod-fs-ext4=y        # EXT4 文件系统
# CONFIG_PACKAGE_kmod-fs-ntfs=y        # NTFS 文件系统
# CONFIG_PACKAGE_kmod-fs-vfat=y        # FAT 文件系统

# USB 支持（K2P 无 USB，可删除）
# CONFIG_PACKAGE_kmod-usb-core=y
# CONFIG_PACKAGE_kmod-usb3=y
# CONFIG_PACKAGE_kmod-usb-storage=y

# IPv6 支持（如不需要可关闭）
CONFIG_PACKAGE_ip6tables=y             # IPv6 防火墙
CONFIG_PACKAGE_odhcp6c=y               # DHCPv6 客户端,如不用 IPv6 可删
CONFIG_PACKAGE_odhcpd-ipv6only=y       # IPv6 DHCP 服务,IPv6 可删

# -------------------------------
# LuCI Web 管理界面（按需添加）
# -------------------------------
CONFIG_PACKAGE_luci=y                 # LuCI 核心
CONFIG_PACKAGE_luci-base=y            # LuCI 基础模块
CONFIG_PACKAGE_luci-proto-ipv6=y      # IPv6 支持
CONFIG_PACKAGE_luci-proto-ppp=y       # PPP 支持
CONFIG_PACKAGE_luci-theme-bootstrap=n # 默认主题

# -------------------------------
# 其他配置
# -------------------------------
CONFIG_BUSYBOX_CUSTOM=y               # 自定义 Busybox 配置
CONFIG_BUSYBOX_CONFIG_DEPRECATED=y    # 保留过时命令（兼容性）
CONFIG_OPENSSL_OPTIMIZE_SPEED=y       # OpenSSL 速度优化

# -------------------------------
# 其它软件
# -------------------------------
# CONFIG_PACKAGE_your-plugin-name=y    # 编译进固件
# 或
# CONFIG_PACKAGE_your-plugin-name=m    # 编译为独立ipk包
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-tailscale=y
CONFIG_PACKAGE_luci-app-arpbind=y